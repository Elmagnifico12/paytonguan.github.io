<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#000">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-flash.min.css?v=1.0.2">















  
  
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  

  
    
      
    

    
  

  
    
    
    <link rel="stylesheet" href="https://fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=7.1.1">


  <link rel="mask-icon" href="/images/safari-pinned-tab.svg?v=7.1.1" color="#000">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: true,
    lazyload: false,
    tabs: false,
    motion: {"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Google是一个强大的搜索引擎，所以，这篇「Google正确食用指南」就来满足大家热爱「学习」的需求啦。">
<meta property="og:type" content="article">
<meta property="og:title" content="Google正确食用指南">
<meta property="og:url" content="http://paytonguan.github.io/Google正确食用指南/index.html">
<meta property="og:site_name" content="Payton&#39;s blog">
<meta property="og:description" content="Google是一个强大的搜索引擎，所以，这篇「Google正确食用指南」就来满足大家热爱「学习」的需求啦。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-06-03T02:30:07.003Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Google正确食用指南">
<meta name="twitter:description" content="Google是一个强大的搜索引擎，所以，这篇「Google正确食用指南」就来满足大家热爱「学习」的需求啦。">





  
  
  <link rel="canonical" href="http://paytonguan.github.io/Google正确食用指南/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Google正确食用指南 | Payton's blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Payton's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Somewhere leisure.</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://paytonguan.github.io/Google正确食用指南/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Payton">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Payton's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Google正确食用指南

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              

              
                
              

              <time title="创建时间：2019-06-02 17:01:00" itemprop="dateCreated datePublished" datetime="2019-06-02T17:01:00+08:00">2019-06-02</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Technology/" itemprop="url" rel="index"><span itemprop="name">Technology</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon" title="阅读次数">
            <i class="fa fa-eye"></i>
            
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Google是一个强大的搜索引擎，所以，这篇「Google正确食用指南」就来满足大家热爱「学习」的需求啦。</p>
<a id="more"></a>

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我不是专业人士，所以解释不是很精准。想直接看方法的可以跳过这部分啦。</p>
<h3 id="技术原理"><a href="#技术原理" class="headerlink" title="技术原理"></a>技术原理</h3><p>要说明访问外网的技术原理，首先要说明一下这堵墙的作用机制。</p>
<p>我们访问网络是通过数据包的传递来完成的。我们的网站实际上是一个服务器，也就是一台电脑。我们向这台电脑发送数据包，这台电脑返回数据包给我们，就完成了访问网站的流程。</p>
<p>每台服务器都有一个IP地址，IP地址可以理解为我们现实生活中的地址，知道了地址，你才能准确的访问到你想要访问的网站。</p>
<p>可是IP地址是一串很难记的数字，比如说，百度的IP地址是14.215.177.39，Google的IP地址经常变动。为了让我们容易记住，网站就把这一串地址用域名来代替，所以我们输入<a href>www.baidu.com</a>，就可以访问百度了。当然，你输入<a href>14.215.177.39</a>也是可以的，不信可以去试一下。</p>
<p>但是域名和地址是怎样对应上的呢？这时候就需要DNS的帮忙了。DNS可以理解为帮你查地址的邮差，你告诉它域名，它返回给你正确的IP地址，你就可以访问你想要访问的网站了。</p>
<p>而这堵墙就建在你和网站之间。主要的手段有以下几个，</p>
<p><code>IP封锁</code>，当它发现你访问的IP地址是被封锁的，它就会把你拦住，让你无法访问网站。</p>
<p><code>DNS挟持</code>，有些DNS会回复错误的地址，让你无法访问正确的网站。</p>
<p><code>DNS污染</code>，DNS之间会互相交流信息，当有DNS回复错误地址时，会影响其他DNS也回复错误的地址。</p>
<p><code>关键词过滤</code>，它会对传输的数据包进行检查，如果发现有位于黑名单内的关键词，则会阻止数据包的传递。</p>
<p>具体可以看一下这个视频，当然前提是你要看完下面的内容，学会登高望远（原本就会的当我没说）</p>
<p>【【【</p>
<h3 id="访问外网的姿势"><a href="#访问外网的姿势" class="headerlink" title="访问外网的姿势"></a>访问外网的姿势</h3><p>由于现在所使用的是黑名单模式，在黑名单上的网站IP无法访问，不在黑名单上的第三方IP就可以访问，所以现在几乎所有的方法，都是基于这个原理实现的——</p>
<p>去找一台能够访问外网的电脑（服务器），让它代替你去访问，然后把数据包传给你。因为这台电脑的IP地址并没有遭到封禁，所以是可以通过审查的。</p>
<p>现在主要的方法有下面几种，都是基于上面所说的前提的，只是技术细节不同而已。</p>
<h4 id="歪批嗯"><a href="#歪批嗯" class="headerlink" title="歪批嗯"></a>歪批嗯</h4><p>一谈到科学爱国，很多人都觉得就是这个东西（某三个英文字母的谐音），包括以前的我也是这样认为的。但实际上，它的设计初衷并不是用来上外网，而是加密通讯。现在用这种方法很容易被发现，所以实际上是基本废掉了。</p>
<p>但其实你也经常用它。举个例子，你人在外面，但是要打开校内的网站，由于校内网站要用校园网才能打开，所以你就可以用学校的这个服务了。连上学校的服务器以后，就可以以校园网的身份访问校内网站，再把数据回传给你，你就可以人在外地，心系校园了（误</p>
<h4 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h4><p>代理其实分正向代理和反向代理，要实现我们的目标，用的都是正向代理（其实我也不知道反向代理是什么）。</p>
<p>代理的设计初衷也不是上外网，而是匿名，跟上面的那种方法差不多。常见的代理协议有<code>HTTP</code>、<code>HTTPS</code>、<code>Socks4</code>、<code>Socks5</code>等，反正我也不懂具体的区别。</p>
<p>这四种代理协议都是通过把数据发给代理服务器，然后再由代理服务器转发给目的服务器的方式达到我们的目的，也就是说，只要你找到了一台能够在国内访问外网的服务器的代理地址，你就可以通过这种方式实现科学爱国了（具体做法在后面会有）。</p>
<h4 id="机场-软件"><a href="#机场-软件" class="headerlink" title="机场 / 软件"></a>机场 / 软件</h4><p>这里的「机场」当然不是我们坐飞机的机场，而是指提供节点服务的供应商。节点可以理解为服务器，机场会提供国外的服务器，还会有很简单的使用教程，当然绝大部分都是要收费的。</p>
<p>很多打着「加速器」旗号的软件其实也是一个道理，同样也是要收费的，不收费的那些基本上你就只能看144p了。当然，也有一些软件是以自带连接外网功能的浏览器来提供服务的，这些软件一般都免费，后面会说。</p>
<h4 id="各种专门的协议"><a href="#各种专门的协议" class="headerlink" title="各种专门的协议"></a>各种专门的协议</h4><p>这里的协议包括<code>v2ray</code>、<code>shadowsocks（SS）</code>、<code>shadowsocksR（SSR）</code>、<code>wireguard</code>、<code>brook</code>、<code>outline</code>等，这些协议的设计初衷就是科学上网，所以它们的隐蔽性相对较高，加密方式也相对完善。但是SSR现在基本不能用了，wireguard和brook我没用过，但据说速度比不上v2ray和SS，所以这两种也是主流的协议。相比于SS，v2ray出现的时间比较晚，使用的人没那么多，所以安全性也较高（毕竟枪打出头鸟嘛），我比较推荐。</p>
<h2 id="安全须知"><a href="#安全须知" class="headerlink" title="安全须知"></a>安全须知</h2><p>做爬到树梢上看风景的猴子，自然也要注重安全。所以在正式介绍之前，请先穿好防护衣，包括但不限于</p>
<h3 id="不要用360和百度"><a href="#不要用360和百度" class="headerlink" title="不要用360和百度"></a>不要用360和百度</h3><p>包括<code>360安全卫士</code>、<code>360杀毒</code>等一系列软件，特别是<code>360浏览器</code>。因为360系和百度系得产品会自动上报IP地址，很容易造成你所用的服务器遭到封禁。</p>
<p>杀毒软件可以用Windows自带的<code>Windows Defender</code>，清理软件我自己在用<code>CCleaner</code>，至于悬浮球点一下清内存的功能，可以用<code>MemReduct</code>。当然，如果你都已经出去了，你肯定会用Google啦。</p>
<h3 id="不要用国内浏览器"><a href="#不要用国内浏览器" class="headerlink" title="不要用国内浏览器"></a>不要用国内浏览器</h3><p>推荐用<code>Google Chrome</code>，基本现在所有的浏览器都是基于Chrome的Chromium内核构建的。用国内浏览器会有上面提到的同样的风险。当然，你要用<code>Microsoft Edge</code>也行，至于<code>Internet Explorer</code>就算了。</p>
<h3 id="浏览器打开「不跟踪」请求"><a href="#浏览器打开「不跟踪」请求" class="headerlink" title="浏览器打开「不跟踪」请求"></a>浏览器打开「不跟踪」请求</h3><p>以Chrome为例，打开「设置」-「高级」，在「隐私设置和安全性」一栏，打开「随浏览流量一起发送“不跟踪”请求」即可。</p>
<h3 id="更改系统语言（可选）"><a href="#更改系统语言（可选）" class="headerlink" title="更改系统语言（可选）"></a>更改系统语言（可选）</h3><p>一般来说你用哪个国家的服务器就改哪个国家的语言，据说会更加安全，但我觉得其实不改也没什么大问题:(</p>
<h2 id="初级玩家"><a href="#初级玩家" class="headerlink" title="初级玩家"></a>初级玩家</h2><h3 id="免费软件"><a href="#免费软件" class="headerlink" title="免费软件"></a>免费软件</h3><p>网上有很多关于这方面的教程都需要用户先得有一个「全局代理」环境，可是我现在就是没办法找到这样一个环境啊，这就变成了一个鸡生蛋蛋生鸡的问题。遇到不少坑以后，终于找到了几款比较好用而且免费的软件。</p>
<h4 id="电脑用户"><a href="#电脑用户" class="headerlink" title="电脑用户"></a>电脑用户</h4><h5 id="无界浏览"><a href="#无界浏览" class="headerlink" title="无界浏览"></a>无界浏览</h5><p>适用平台：<code>Windows</code>、<code>Mac</code></p>
<p>这个软件用起来很简单，双击打开，等待服务器连接成功，然后你就可以上网了，速度还挺快。</p>
<p>但是这个软件背后是有组织的，奉劝大家不要被带偏了，做个默默薅羊毛的吃瓜群众就好（真诚脸</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（Windows）<span class="string">https:</span><span class="comment">//www.lanzous.com/i4eyu4b</span></span><br><span class="line">（Mac）<span class="string">https:</span><span class="comment">//www.lanzous.com/i4eyt1c</span></span><br></pre></td></tr></table></figure>

<h5 id="JJQQKK"><a href="#JJQQKK" class="headerlink" title="JJQQKK"></a>JJQQKK</h5><p>适用平台：<code>Windows</code>、<code>Mac</code></p>
<p>这是一个内置访问外网功能的Chromium浏览器，安装后从桌面右下角图标启动就可以访问了，简单易用，速度也很快。</p>
<p>它的Github主页上也有很详细的说明。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/jjqqkk/</span>chromium</span><br></pre></td></tr></table></figure>

<h5 id="歪批嗯-Plus-Hotspot-Shield"><a href="#歪批嗯-Plus-Hotspot-Shield" class="headerlink" title="歪批嗯 Plus / Hotspot Shield"></a>歪批嗯 Plus / Hotspot Shield</h5><p>适用平台：<code>Mac</code></p>
<p>这两个软件可以在美区的Mac App Store找到，下载使用即可。关于美区Apple ID的注册，有空会再写一下的，后面也会讲如何找共享的美区Apple ID的方法。</p>
<p>注意，第一款软件虽然在中区Mac App Store也有上架，但是下载以后是无法使用的，必须用美区账号下载才能正常使用。</p>
<p>至于Hotspot Shield，在其他平台也有，但使用体验一般。</p>
<h4 id="手机用户"><a href="#手机用户" class="headerlink" title="手机用户"></a>手机用户</h4><h5 id="Betternet-歪批嗯-360"><a href="#Betternet-歪批嗯-360" class="headerlink" title="Betternet / 歪批嗯 360"></a>Betternet / 歪批嗯 360</h5><p>适用平台：<code>iOS</code></p>
<p>同理，这两款软件也要在美区的App Store才能找到。Betternet在安卓端也有，但我没有用过，在Windows表现并不好。</p>
<p>其实这两款软件在iOS的表现也很一般，只能作为应急使用。</p>
<h5 id="歪批嗯-plus"><a href="#歪批嗯-plus" class="headerlink" title="歪批嗯 plus"></a>歪批嗯 plus</h5><p>适用平台：<code>iOS</code>、<code>Android</code></p>
<p>同样，这款软件的iOS版要在美区下载，不过可以附上它的Android版下载链接。同样的，这款软件速度不算很好，但也可以应应急。</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//www.lanzous.com/i4ez8wd</span></span><br></pre></td></tr></table></figure>

<h5 id="老王歪批嗯"><a href="#老王歪批嗯" class="headerlink" title="老王歪批嗯"></a>老王歪批嗯</h5><p>适用平台：<code>Android</code></p>
<p>这款软件可以在Google Play下载，当然你现在的问题就是你上不去（笑，所以还是留了个下载地址在下面。</p>
<p>其实Google Play有很多这一类的软件，去搜索一下就可以啦。不过应该把Google账号的地区改为美国。</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//www.lanzous.com/i4ezbla</span></span><br></pre></td></tr></table></figure>

<h3 id="配置代理"><a href="#配置代理" class="headerlink" title="配置代理"></a>配置代理</h3><p>前面说过，只要知道服务器的代理地址，就可以通过代理的方式连接外网。所以重点就在如何找这些地址已经如何配置代理。</p>
<h4 id="寻找代理节点"><a href="#寻找代理节点" class="headerlink" title="寻找代理节点"></a>寻找代理节点</h4><h5 id="通过免费代理节点网站"><a href="#通过免费代理节点网站" class="headerlink" title="通过免费代理节点网站"></a>通过免费代理节点网站</h5><p>这一类的网站只要谷歌一下免费代理节点就有很多，但这些网站也是需要你有外网环境的，所以其实用处并不是很大，但还是放两个免费代理节点的网站吧。</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//free-proxy.cz/</span></span><br><span class="line"><span class="symbol">http:</span><span class="comment">//www.gatherproxy.com/zh/sockslist</span></span><br></pre></td></tr></table></figure>

<h5 id="通过工具寻找代理节点"><a href="#通过工具寻找代理节点" class="headerlink" title="通过工具寻找代理节点"></a>通过工具寻找代理节点</h5><p>打开下列网站并下载ProxyScrape，这是一个寻找免费节点的小工具。打开后选择Check proxies，然后填写所要求的代理服务器的ping值。ping值越大，表明延迟越大，一般来说，公用的服务器ping值都会在100ms以上，因此这里可以取400-500左右。接着是填写检查代理服务器的数量，然后会提示选择代理服务器的协议类型。一般而言HTTPS是最安全的，这里可以根据需求自行选择。然后选择Check from ProxyScrape.com，工具就会开始筛选代理，并把可用的代理用绿色表示出来。</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//proxyscrape.com/proxy-checker</span></span><br></pre></td></tr></table></figure>

<h4 id="配置网络代理"><a href="#配置网络代理" class="headerlink" title="配置网络代理"></a>配置网络代理</h4><p>获得代理节点后，我们需要配置代理，让网络通过代理上网。如果只是部分想让部分软件设置代理，则可以使用这些软件自带的代理功能。如果想实现系统代理，则需要调整系统设置。</p>
<h5 id="设置软件代理"><a href="#设置软件代理" class="headerlink" title="设置软件代理"></a>设置软件代理</h5><p>以网易云音乐为例，点击设置-工具，在代理选项卡下有三个选项，若选择使用IE代理设置，则需要提前设置好IE的代理。如果选择自定义代理，则在下来菜单中选择代理类型，并输入服务器与端口（比如说所得结果为1.2.3.4:5，则服务器地址为1.2.3.4，端口为5），保存即可。</p>
<h5 id="设置IE代理"><a href="#设置IE代理" class="headerlink" title="设置IE代理"></a>设置IE代理</h5><p>打开IE，点击右上方设置-Internet选项，选择连接-局域网设置，勾选为LAN使用代理服务器，填好地址和端口，并勾选对于本机地址不使用代理服务器，保存并退出。</p>
<h5 id="设置全局代理"><a href="#设置全局代理" class="headerlink" title="设置全局代理"></a>设置全局代理</h5><p>打开设置-网络和Internet-代理，选择使用代理服务器，填好地址和端口，并保存。</p>
<h5 id="设置浏览器代理"><a href="#设置浏览器代理" class="headerlink" title="设置浏览器代理"></a>设置浏览器代理</h5><p>大部分如Chrome、Firefox等浏览器，都可以通过安装插件的方式实现为浏览器设置代理。以Chrome为例，打开Chrome网上应用店并搜SwitchyOmega并安装（需要外网环境）。在百度直接搜索也不是不行，但是这样一般会安装不成功。</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>//chrome.google.com/webstore/category/extensions?hl=<span class="built_in">zh</span>-CN</span><br></pre></td></tr></table></figure>

<p>下载完成后点击插件的「选项」，进入配置页面。点击情景模式的「proxy」，填写代理协议、代理服务器和端口。然后点击「auto switch」，「切换规则」只留「proxy」，「默认情景模式」设为「直接连接」，在「导入在线规则列表」下，点击「添加规则列表」并填入下面网址，点击「立即更新情景模式」，保存后退出。此时可以禁用系统设置中的网络代理。</p>
<p>点击插件，选择auto switch或proxy，就可以用浏览器访问外网了。其中proxy相当于全局模式，auto switch相当于PAC模式。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>raw.githubusercontent.com<span class="regexp">/gfwlist/g</span>fwlist<span class="regexp">/master/g</span>fwlist.txt</span><br></pre></td></tr></table></figure>

<h3 id="收费渠道"><a href="#收费渠道" class="headerlink" title="收费渠道"></a>收费渠道</h3><p>收费的那可就太多了，主要是分成以下两类。</p>
<h4 id="收费软件"><a href="#收费软件" class="headerlink" title="收费软件"></a>收费软件</h4><p>只要写着「加速器」的一般都是要收费的，收费标准我没有了解，有些按照流量来计费，有些按照时长。电脑端的付费软件有很多，可以在Youtube上查到。</p>
<p>手机用户也是一样的，只要把地区切换到美国，就能在App Store或者Google Play找到很多这一类的软件。</p>
<h4 id="收费机场"><a href="#收费机场" class="headerlink" title="收费机场"></a>收费机场</h4><p>也不是说机场就一定收费，我也用过一些免费的机场，但也只用了一个月。机场基本都差不多，会有很详细的教程，Youtube上有很多推荐。</p>
<h2 id="高级玩法"><a href="#高级玩法" class="headerlink" title="高级玩法"></a>高级玩法</h2><h3 id="自己做「机场主」"><a href="#自己做「机场主」" class="headerlink" title="自己做「机场主」"></a>自己做「机场主」</h3><p>前面说过机场是提供国外服务器的，那有没有可能自己找一台国外的服务器呢？答案是可以的，而且其实一点也不复杂。</p>
<p>自己找一台国外的服务器，速度和安全性会有保证，而且价格也不一定贵。访问外网最重要的当然是安全，前面的免费软件使用的是别人提供的服务器，有可能会留有后门，取得你的个人资料，终究不是最好的方案。</p>
<h3 id="为什么用GCP"><a href="#为什么用GCP" class="headerlink" title="为什么用GCP"></a>为什么用GCP</h3><p>现在一般的主流服务器供应商有<code>谷歌云（Google Cloud Platform，GCP）</code>、<code>搬瓦工（BandwagonHost）</code>、Vultr等。搬瓦工和Vultr我没有用过，它是要付费的，跟很多主流服务器提供商一样。如果想找这方面的服务器，还可以考虑<code>阿里云</code>等等，在Youtube上也会有关于这方面的视频。</p>
<p>至于GCP，本来也是要付费的，但是现在它有<code>300美金试用一年</code>的活动，足够十几个人爽一年了。而且，根据Youtube上的教程，一年有效期过后，通过简单的操作，又可以把300美金重新拿到手。大公司提供的免费服务，为什么不要呢？</p>
<h3 id="申请GCP"><a href="#申请GCP" class="headerlink" title="申请GCP"></a>申请GCP</h3><h4 id="准备一张Visa-万事达信用卡"><a href="#准备一张Visa-万事达信用卡" class="headerlink" title="准备一张Visa / 万事达信用卡"></a>准备一张Visa / 万事达信用卡</h4><p>这是注册GCP的先决条件，因为注册需要你绑定一张信用卡以验证，但以后使用的时候，Google是不会自动从这张卡扣费的。</p>
<p>有实体卡是最好的，但实体卡也不一定全部都可以，可以在Google或者Youtube搜索<code>谷歌云注册</code>看下最新的教程。</p>
<p>我当时是注册了一张虚拟万事达信用卡通过了认证，但我不知道现在的认证条件有没有改变，想尝试的可以试一下，教程链接在下方。</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span><span class="comment">//www.wn789.com/14908.html</span></span><br></pre></td></tr></table></figure>

<h4 id="生成境外地址"><a href="#生成境外地址" class="headerlink" title="生成境外地址"></a>生成境外地址</h4><p>谷歌云现在国家选项已经不能选「中国」了，建议选<code>香港</code>或者<code>美国</code>，我选择的是美国。百度一下<code>美国地址生成器</code>就能得到一个美国地址。</p>
<h4 id="准备外网环境"><a href="#准备外网环境" class="headerlink" title="准备外网环境"></a>准备外网环境</h4><p>GCP的注册和使用需要外网环境，所以需要先用前面提到的软件应个急。搭建完成后，就可以用自己搭建的服务器上网啦。</p>
<h4 id="进入注册"><a href="#进入注册" class="headerlink" title="进入注册"></a>进入注册</h4><p>准备好上面的内容后，打开下方网页并完成注册，正常情况下Google会从你的信用卡扣费1美元，如果扣费成功，证明账号已经注册成功了。因为我注册时没有遇到问题，所以如果遇到问题的话，可以网上找一下解决方案。</p>
<p>点击左上角的菜单，选择<code>结算</code>，可以看到剩余赠金和剩余试用日期。如果选择的地区是香港，会显示有2000+的赠金，那是因为货币单位是港元，不是美元，不必惊慌（笑</p>
<h3 id="用GCP搭建服务器"><a href="#用GCP搭建服务器" class="headerlink" title="用GCP搭建服务器"></a>用GCP搭建服务器</h3><h4 id="创建防火墙规则"><a href="#创建防火墙规则" class="headerlink" title="创建防火墙规则"></a>创建防火墙规则</h4><p>点击菜单中的<code>VPC网络</code>-<code>防火墙规则</code>，进入防火墙规则页面后，点击<code>创建防火墙规则</code>，进入防火墙规则创建界面。</p>
<p>名称改为<code>entrance</code>（其他名称也可以），优先级设为<code>1</code>，流量方向为<code>入站</code>，对匹配项执行的操作选择允许，目标选择<code>网络中的所有实例</code>，来源IP地址范围填写<code>0.0.0.0/0</code>，点击<code>创建</code>即可。</p>
<p>同理，再创建一个防火墙实例，名称改为exit，流量方向为出站，其余与上面的一致，保存。</p>
<h4 id="创建VM实例"><a href="#创建VM实例" class="headerlink" title="创建VM实例"></a>创建VM实例</h4><p>点击菜单中的Compute Engine-VM实例，点击创建，进入VM实例创建页面。</p>
<p>名称任意，区域建议选择asia-east2（香港）或asia-east1（台湾），地区任意，机器类型选择微型，防火墙勾选允许HTTP流量、允许HTTPS流量。</p>
<p>下面的标签页切换到网络一栏，在网络标记一栏填入刚才创建好的两个防火墙规则的名字，点击最下方的创建，完成VM实例创建。</p>
<p>创建完成后会出来一个内部IP和一个外部IP，打开命令提示符（Win+R后cmd回车），输入ping 外部IP（比如ping 35.XXX.XXX.XXX），查看ping值。</p>
<p>如果ping值过大，则再创建一个新的实例（注意不要把原来的实例删除，不然会分配到同一台服务器），直到得到一台ping值小的服务器（一般100ms以内，数字越小越好），再把其它实例删除。</p>
<h4 id="在VM实例上搭建v2ray"><a href="#在VM实例上搭建v2ray" class="headerlink" title="在VM实例上搭建v2ray"></a>在VM实例上搭建v2ray</h4><p>这里的实例就是前面所提到的<code>v2ray</code>、<code>shadowsocks（SS）</code>、<code>shadowsocksR（SSR）</code>、<code>wireguard</code>、<code>brook</code>、<code>outline</code>等，一般选用v2ray或SS，个人感觉v2ray更好一点。</p>
<p>点击VM实例上的SSH按钮，等待命令行窗口出现。在命令行中输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">bash &lt;(curl -s -L https://git.io/v2ray.sh)</span><br></pre></td></tr></table></figure>

<p>以获取管理员权限，并执行v2ray一键安装脚本。按照流程一步步回车，还可以一同搭建SS，最后得到v2ray配置信息。</p>
<p>复制v2ray配置信息，并输入v2ray ssqr生成二维码。保存二维码，便于以后使用和分享。如果二维码无法生成，那么后面客户端使用的时候就要手动输入服务器的配置。</p>
<h4 id="v2ray客户端的使用"><a href="#v2ray客户端的使用" class="headerlink" title="v2ray客户端的使用"></a>v2ray客户端的使用</h4><p>至此v2ray已经搭建完成，只需要下载对应的客户端即可使用。</p>
<h5 id="Windows用户"><a href="#Windows用户" class="headerlink" title="Windows用户"></a>Windows用户</h5><p>下载v2rayN-Core.zip，解压并打开v2rayN.exe。点击服务器，选择扫描屏幕上的二维码，客户端会自动扫描刚才生成的二维码并添加配置信息。右键点击新增的服务器，选择设为活动服务器。然后在v2ray的托盘图标点击右键，勾选启用http代理，并在http代理模式中选择PAC模式，即可上网。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/2dust/</span>v2rayN<span class="regexp">/releases/</span></span><br></pre></td></tr></table></figure>

<h5 id="Mac用户"><a href="#Mac用户" class="headerlink" title="Mac用户"></a>Mac用户</h5><p>下载zip包并解压，将V2RayX.app复制到应用程序文件夹后打开，</p>
<p>【【【</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http<span class="variable">s:</span>//github.<span class="keyword">com</span>/insisttech/v2rayX-<span class="keyword">copy</span>/releases</span><br></pre></td></tr></table></figure>

<h5 id="Android用户"><a href="#Android用户" class="headerlink" title="Android用户"></a>Android用户</h5><p>下载app-universal-release.apk，安装到手机并打开。点击上方+号并选择从二维码导入配置，扫描前面生成的二维码，这样服务器配置就添加进来了。</p>
<p>然后点击左上角的菜单，选择设置，在路由模式中选择绕过中国大陆。回到主页面，点击右下角的启动按钮，允许连接。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/<span class="number">2</span>dust/v2rayNG/releases</span><br></pre></td></tr></table></figure>

<h5 id="iOS用户"><a href="#iOS用户" class="headerlink" title="iOS用户"></a>iOS用户</h5><h4 id="Linux用户使用"><a href="#Linux用户使用" class="headerlink" title="Linux用户使用"></a>Linux用户使用</h4><p>前面提到的软件涵盖了Windows、Mac、Android和iOS，唯独没有包括Linux。因为Linux系统对命令行的依赖，加上Linux的软件生态没有Windows来的广阔，导致没办法找到一个比较好的图形化客户端。</p>
<p>不过能玩Linux的一般都是肯折腾的人，区区命令行不在话下:(</p>
<p>##### </p>
<h5 id="配置代理-1"><a href="#配置代理-1" class="headerlink" title="配置代理"></a>配置代理</h5><p>虽然Linux找不到一个好的客户端，但是Linux还是可以通过前面所说的配置代理的方式达到我们的目的。配置方法是类似的，对于配置系统代理，在Ubuntu中位于设置-网络-网络代理-手动配置代理，其它Linux系统也类似。对于其它代理的配置则基本相同。</p>
<h5 id="使用v2ray"><a href="#使用v2ray" class="headerlink" title="使用v2ray"></a>使用v2ray</h5><h6 id="v2ray的安装"><a href="#v2ray的安装" class="headerlink" title="v2ray的安装"></a>v2ray的安装</h6><p>进入下面网站（需要外网环境，可在Windows下进行），点击v2ray-linux-64.zip进行下载，解压后放于/tmp/v2ray，并改名为v2ray.zip。</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/v2ray/</span>v2ray-core<span class="regexp">/releases</span></span><br></pre></td></tr></table></figure>

<p>打开终端并输入命令，下载好的脚本会放于终端工作路径（默认为主文件夹，即/home/用户名）。若go.sh无法下载，可使用文末附有的代码。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http<span class="variable">s:</span>//install.direct/<span class="keyword">go</span>.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>

<p>用文本编辑器打开下载好的go.sh，找到downloadV2Ray()函数，删除函数内所有代码并return 0，如下所示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">downloadV2Ray</span></span>()&#123;</span><br><span class="line"><span class="built_in">return</span> 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改完成后在终端输入命令，等待v2ray安装完成。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./<span class="keyword">go</span>.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>

<p>安装完成后输入</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo nautilus</span></span><br></pre></td></tr></table></figure>

<p>转到/etc/v2ray/config.json</p>
<p>打开并将内容用下面的代码覆盖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"log"</span>: &#123;</span><br><span class="line">    <span class="string">"access"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"error"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="string">"loglevel"</span>: <span class="string">"warning"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"inbound"</span>: &#123;</span><br><span class="line">    <span class="string">"port"</span>: 1080,</span><br><span class="line">    <span class="string">"listen"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">// SOCKS 地址及代理端口，在浏览器中需配置代理并指向这个端口，此处使用127.0.0.1:1080</span><br><span class="line"></span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"socks"</span>,</span><br><span class="line">    <span class="string">"domainOverride"</span>: [</span><br><span class="line">      <span class="string">"tls"</span>,</span><br><span class="line">      <span class="string">"http"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"auth"</span>: <span class="string">"noauth"</span>,</span><br><span class="line">      <span class="string">"udp"</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="string">"ip"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">      <span class="string">"clients"</span>: null</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"streamSettings"</span>: null</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"outbound"</span>: &#123;</span><br><span class="line">    <span class="string">"tag"</span>: <span class="string">"agentout"</span>,</span><br><span class="line">    <span class="string">"protocol"</span>: <span class="string">"vmess"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"vnext"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"address"</span>: <span class="string">"server"</span>, </span><br><span class="line">          <span class="string">"port"</span>: 10086,  </span><br><span class="line">// 服务器地址及端口，需修改为自己的服务器 ip 或域名</span><br><span class="line">          <span class="string">"users"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="string">"id"</span>: <span class="string">"b831381d-6324-4d53-ad4f-8cda48b30811"</span>, </span><br><span class="line">              <span class="string">"alterId"</span>: 0,</span><br><span class="line">              <span class="string">"email"</span>: <span class="string">"t@t.tt"</span>,</span><br><span class="line">              <span class="string">"security"</span>: <span class="string">"aes-128-gcm"</span></span><br><span class="line">// 此处配置应与服务器Vmess架构的信息一致</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">"servers"</span>: null</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"streamSettings"</span>: &#123;</span><br><span class="line">      <span class="string">"network"</span>: <span class="string">"tcp"</span>,</span><br><span class="line">      <span class="string">"security"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="string">"tlsSettings"</span>: null,</span><br><span class="line">      <span class="string">"tcpSettings"</span>: null,</span><br><span class="line">      <span class="string">"kcpSettings"</span>: null,</span><br><span class="line">      <span class="string">"wsSettings"</span>: null,</span><br><span class="line">      <span class="string">"httpSettings"</span>: null</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"mux"</span>: &#123;</span><br><span class="line">      <span class="string">"enabled"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"inboundDetour"</span>: null,</span><br><span class="line">  <span class="string">"outboundDetour"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"freedom"</span>,</span><br><span class="line">      <span class="string">"settings"</span>: &#123;</span><br><span class="line">        <span class="string">"response"</span>: null</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"tag"</span>: <span class="string">"direct"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"protocol"</span>: <span class="string">"blackhole"</span>,</span><br><span class="line">      <span class="string">"settings"</span>: &#123;</span><br><span class="line">        <span class="string">"response"</span>: &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"http"</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">"tag"</span>: <span class="string">"blockout"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"dns"</span>: &#123;</span><br><span class="line">    <span class="string">"servers"</span>: [</span><br><span class="line">      <span class="string">"8.8.8.8"</span>,</span><br><span class="line">      <span class="string">"8.8.4.4"</span>,</span><br><span class="line">      <span class="string">"localhost"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"routing"</span>: &#123;</span><br><span class="line">    <span class="string">"strategy"</span>: <span class="string">"rules"</span>,</span><br><span class="line">    <span class="string">"settings"</span>: &#123;</span><br><span class="line">      <span class="string">"domainStrategy"</span>: <span class="string">"IPIfNonMatch"</span>,</span><br><span class="line">      <span class="string">"rules"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"type"</span>: <span class="string">"field"</span>,</span><br><span class="line">          <span class="string">"port"</span>: null,</span><br><span class="line">          <span class="string">"outboundTag"</span>: <span class="string">"direct"</span>,</span><br><span class="line">          <span class="string">"ip"</span>: [</span><br><span class="line">            <span class="string">"0.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"10.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"100.64.0.0/10"</span>,</span><br><span class="line">            <span class="string">"127.0.0.0/8"</span>,</span><br><span class="line">            <span class="string">"169.254.0.0/16"</span>,</span><br><span class="line">            <span class="string">"172.16.0.0/12"</span>,</span><br><span class="line">            <span class="string">"192.0.0.0/24"</span>,</span><br><span class="line">            <span class="string">"192.0.2.0/24"</span>,</span><br><span class="line">            <span class="string">"192.168.0.0/16"</span>,</span><br><span class="line">            <span class="string">"198.18.0.0/15"</span>,</span><br><span class="line">            <span class="string">"198.51.100.0/24"</span>,</span><br><span class="line">            <span class="string">"203.0.113.0/24"</span>,</span><br><span class="line">            <span class="string">"::1/128"</span>,</span><br><span class="line">            <span class="string">"fc00::/7"</span>,</span><br><span class="line">            <span class="string">"fe80::/10"</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="string">"domain"</span>: null</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>保存后在终端Ctrl+C并输入命令，使v2ray开机自启，并启动v2ray查看状态。如果显示绿色，证明v2ray已成功运行。</p>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo<span class="keyword"> system</span>ctl enable v2ray</span><br><span class="line">sudo<span class="keyword"> system</span>ctl start v2ray</span><br><span class="line">sudo<span class="keyword"> system</span>ctl status v2ray</span><br></pre></td></tr></table></figure>

<h6 id="v2ray的使用"><a href="#v2ray的使用" class="headerlink" title="v2ray的使用"></a>v2ray的使用</h6><p>这时候v2ray已经把你的服务器转换为本地代理127.0.0.1:1080了，按照前面所说的配置系统代理的方式即可使用。配置系统代理后就可以配置浏览器代理，然后以后使用时，就可以只打开浏览器代理，关闭系统代理，从而节省服务器流量。</p>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="如何寻找美区Apple-ID、下载美区付费软件"><a href="#如何寻找美区Apple-ID、下载美区付费软件" class="headerlink" title="如何寻找美区Apple ID、下载美区付费软件"></a>如何寻找美区Apple ID、下载美区付费软件</h3><p>推荐几个分享美区Apple ID的公众号，</p>
<p>SCDxC、大灰hurbai、康庄大道CK、GameToom、SMG果粉ID、叶子游戏</p>
<p>我个人最喜欢SCDxC，已购应用多，账号也多，还有网页版ios.scdxc.app，查找应用时非常方便，也有上面所提到的v2ray客户端的下载。</p>
<p>这些共享账号的使用也很简单，首先你要看哪个共享账号有你想要的应用并获得密码，然后把自己的Apple ID退出并登录公众号提供的账号，就可以下载了。</p>
<h3 id="一点拓展"><a href="#一点拓展" class="headerlink" title="一点拓展"></a>一点拓展</h3><h4 id="全局-直连-规则模式"><a href="#全局-直连-规则模式" class="headerlink" title="全局 / 直连 / 规则模式"></a>全局 / 直连 / 规则模式</h4><p>全局模式（Global），就是所有的流量都走服务器，包括访问国内的网站。这样会使服务器所耗流量增加，而且由于数据包绕了远路，速度也会慢一点。但有些情况必须打开全局模式。</p>
<p>直连模式（Direct），就是完全不走服务器，等于没有连接外网。</p>
<p>规则模式（Rule），我认为跟电脑的PAC模式是一样的，通过设定规则，让某些网站走服务器，另一些则直接连接。不同的是，手机上的规则模式需要指定规则文件，而电脑的PAC模式一般会自动生成规则文件，并根据你访问的网站对规则进行更新。</p>
<h4 id="VPS"><a href="#VPS" class="headerlink" title="VPS"></a>VPS</h4><p>可能有人会听说过VPS，但是不知道VPS是什么，跟歪批嗯有什么关系。其实VPS可以理解为安装到电脑上的虚拟机，一台电脑可以安装很多台虚拟机，而这些虚拟机都是相互独立的，可以用作不同的事情。也就是说，前面所提到的那些协议，都是安装在VPS上的。</p>
<p>VPS的作用当然不止是搭建服务器，普通电脑可以完成的事情，VPS也可以完成，包括搭建网站等。</p>
<h3 id="最后的忠告"><a href="#最后的忠告" class="headerlink" title="最后的忠告"></a>最后的忠告</h3><p>学习诚可贵，身体价更高。开车不喝酒，喝酒不开车。</p>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="Payton">
            
              <p class="site-author-name" itemprop="name">Payton</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/guanpeiheng1" title="GitHub &rarr; https://github.com/guanpeiheng1" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="mailto:guanpeiheng1@gmail.com" title="E-Mail &rarr; mailto:guanpeiheng1@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://weibo.com/guanpeiheng1" title="Weibo &rarr; https://weibo.com/guanpeiheng1" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://www.facebook.com/guanpeiheng1" title="FB Page &rarr; https://www.facebook.com/guanpeiheng1" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://instagram.com/guanpeiheng1" title="Instagram &rarr; https://instagram.com/guanpeiheng1" rel="noopener" target="_blank"><i class="fa fa-fw fa-instagram"></i></a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#技术原理"><span class="nav-number">1.1.</span> <span class="nav-text">技术原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#访问外网的姿势"><span class="nav-number">1.2.</span> <span class="nav-text">访问外网的姿势</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#歪批嗯"><span class="nav-number">1.2.1.</span> <span class="nav-text">歪批嗯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#正向代理"><span class="nav-number">1.2.2.</span> <span class="nav-text">正向代理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#机场-软件"><span class="nav-number">1.2.3.</span> <span class="nav-text">机场 / 软件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#各种专门的协议"><span class="nav-number">1.2.4.</span> <span class="nav-text">各种专门的协议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安全须知"><span class="nav-number">2.</span> <span class="nav-text">安全须知</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#不要用360和百度"><span class="nav-number">2.1.</span> <span class="nav-text">不要用360和百度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#不要用国内浏览器"><span class="nav-number">2.2.</span> <span class="nav-text">不要用国内浏览器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#浏览器打开「不跟踪」请求"><span class="nav-number">2.3.</span> <span class="nav-text">浏览器打开「不跟踪」请求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更改系统语言（可选）"><span class="nav-number">2.4.</span> <span class="nav-text">更改系统语言（可选）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#初级玩家"><span class="nav-number">3.</span> <span class="nav-text">初级玩家</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#免费软件"><span class="nav-number">3.1.</span> <span class="nav-text">免费软件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#电脑用户"><span class="nav-number">3.1.1.</span> <span class="nav-text">电脑用户</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#无界浏览"><span class="nav-number">3.1.1.1.</span> <span class="nav-text">无界浏览</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#JJQQKK"><span class="nav-number">3.1.1.2.</span> <span class="nav-text">JJQQKK</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#歪批嗯-Plus-Hotspot-Shield"><span class="nav-number">3.1.1.3.</span> <span class="nav-text">歪批嗯 Plus / Hotspot Shield</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#手机用户"><span class="nav-number">3.1.2.</span> <span class="nav-text">手机用户</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Betternet-歪批嗯-360"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">Betternet / 歪批嗯 360</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#歪批嗯-plus"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">歪批嗯 plus</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#老王歪批嗯"><span class="nav-number">3.1.2.3.</span> <span class="nav-text">老王歪批嗯</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置代理"><span class="nav-number">3.2.</span> <span class="nav-text">配置代理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#寻找代理节点"><span class="nav-number">3.2.1.</span> <span class="nav-text">寻找代理节点</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#通过免费代理节点网站"><span class="nav-number">3.2.1.1.</span> <span class="nav-text">通过免费代理节点网站</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#通过工具寻找代理节点"><span class="nav-number">3.2.1.2.</span> <span class="nav-text">通过工具寻找代理节点</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#配置网络代理"><span class="nav-number">3.2.2.</span> <span class="nav-text">配置网络代理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#设置软件代理"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">设置软件代理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置IE代理"><span class="nav-number">3.2.2.2.</span> <span class="nav-text">设置IE代理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置全局代理"><span class="nav-number">3.2.2.3.</span> <span class="nav-text">设置全局代理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置浏览器代理"><span class="nav-number">3.2.2.4.</span> <span class="nav-text">设置浏览器代理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#收费渠道"><span class="nav-number">3.3.</span> <span class="nav-text">收费渠道</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#收费软件"><span class="nav-number">3.3.1.</span> <span class="nav-text">收费软件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#收费机场"><span class="nav-number">3.3.2.</span> <span class="nav-text">收费机场</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#高级玩法"><span class="nav-number">4.</span> <span class="nav-text">高级玩法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#自己做「机场主」"><span class="nav-number">4.1.</span> <span class="nav-text">自己做「机场主」</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么用GCP"><span class="nav-number">4.2.</span> <span class="nav-text">为什么用GCP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#申请GCP"><span class="nav-number">4.3.</span> <span class="nav-text">申请GCP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#准备一张Visa-万事达信用卡"><span class="nav-number">4.3.1.</span> <span class="nav-text">准备一张Visa / 万事达信用卡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#生成境外地址"><span class="nav-number">4.3.2.</span> <span class="nav-text">生成境外地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#准备外网环境"><span class="nav-number">4.3.3.</span> <span class="nav-text">准备外网环境</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进入注册"><span class="nav-number">4.3.4.</span> <span class="nav-text">进入注册</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用GCP搭建服务器"><span class="nav-number">4.4.</span> <span class="nav-text">用GCP搭建服务器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建防火墙规则"><span class="nav-number">4.4.1.</span> <span class="nav-text">创建防火墙规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建VM实例"><span class="nav-number">4.4.2.</span> <span class="nav-text">创建VM实例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#在VM实例上搭建v2ray"><span class="nav-number">4.4.3.</span> <span class="nav-text">在VM实例上搭建v2ray</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#v2ray客户端的使用"><span class="nav-number">4.4.4.</span> <span class="nav-text">v2ray客户端的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Windows用户"><span class="nav-number">4.4.4.1.</span> <span class="nav-text">Windows用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Mac用户"><span class="nav-number">4.4.4.2.</span> <span class="nav-text">Mac用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Android用户"><span class="nav-number">4.4.4.3.</span> <span class="nav-text">Android用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#iOS用户"><span class="nav-number">4.4.4.4.</span> <span class="nav-text">iOS用户</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux用户使用"><span class="nav-number">4.4.5.</span> <span class="nav-text">Linux用户使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#配置代理-1"><span class="nav-number">4.4.5.1.</span> <span class="nav-text">配置代理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用v2ray"><span class="nav-number">4.4.5.2.</span> <span class="nav-text">使用v2ray</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#v2ray的安装"><span class="nav-number">4.4.5.2.1.</span> <span class="nav-text">v2ray的安装</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v2ray的使用"><span class="nav-number">4.4.5.2.2.</span> <span class="nav-text">v2ray的使用</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#附录"><span class="nav-number">5.</span> <span class="nav-text">附录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#如何寻找美区Apple-ID、下载美区付费软件"><span class="nav-number">5.1.</span> <span class="nav-text">如何寻找美区Apple ID、下载美区付费软件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一点拓展"><span class="nav-number">5.2.</span> <span class="nav-text">一点拓展</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#全局-直连-规则模式"><span class="nav-number">5.2.1.</span> <span class="nav-text">全局 / 直连 / 规则模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#VPS"><span class="nav-number">5.2.2.</span> <span class="nav-text">VPS</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最后的忠告"><span class="nav-number">5.3.</span> <span class="nav-text">最后的忠告</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-comments"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Payton</span>

  

  
</div>









        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  








  













  



  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>

  
  <script src="/lib/reading_progress/reading_progress.js"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>




  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  

  

  

  

  

  

  

  

  
<script>
  $('.highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

</body>
</html>
